(load "/usr/lib/quicklisp/setup")
(load "/usr/lib/asdf/asdf")
(require "asdf")
(require 'sb-aclrepl)
(push "~/Desktop/trtek/" asdf:*central-registry*)
(ql:quickload :cl-strings)
(ql:quickload :cl-project)
(ql:quickload :cl-csv)
(ql:quickload :jonathan)
(ql:quickload :uiop)
(ql:quickload :str)
(ql:quickload :prove)
(ql:quickload :py4cl)
; (ql:quickload "clsql")
; (ql:quickload "clsql-postgresql")
; (ql:quickload "clsql-sqlite3")
(ql:quickload :drakma)
; (ql:quickload :hunchentoot)
(ql:quickload :cl-json)
; (ql:quickload "clouchdb")  ;; for CouchDB access
; (ql:quickload "sqlite")
; (funcall (find-symbol (symbol-name '#:quickload) (symbol-name '#:ql))
;          '#:repl-utilities)
; (use-package  '#:repl-utilities)


(defvar *last-package* nil)
(defvar *cached-prompt* nil)

(defun package-prompt (stream)
  (unless (eq *last-package* *package*)
    (setf *cached-prompt*
	  (concatenate 'string (or (first (package-nicknames *package*))
				   (package-name *package*))
		       "> "))
    (setf *last-package* *package*))
  (terpri)
  (princ *cached-prompt* stream))

(setf sb-int:*repl-prompt-fun* #'package-prompt)
(setf prove:*enable-colors* t)
; (setf sb-aclrepl:*command-char* "TralahTekCL>>>")
(setf sb-aclrepl:*prompt* #'package-prompt)
(setf sb-aclrepl:*max-history* 1000)
